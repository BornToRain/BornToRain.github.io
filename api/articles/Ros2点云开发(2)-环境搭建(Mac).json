{"title":"Ros2点云开发(2)-环境搭建(Mac)","uid":"b51f3813037c1b7be034f55889123a13","slug":"Ros2点云开发(2)-环境搭建(Mac)","date":"2024-03-28T08:04:10.000Z","updated":"2024-03-28T09:22:35.818Z","comments":true,"path":"api/articles/Ros2点云开发(2)-环境搭建(Mac).json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/ros2logo.png","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>这篇文章主要还是因为截止到24年3月为止,Ros2(其实Ros1也一样)在arm64架构的Macbook安装都过于麻烦复杂了.</p>\n<h2 id=\"所需软件\"><a href=\"#所需软件\" class=\"headerlink\" title=\"所需软件\"></a>所需软件</h2><p>开发所需:</p>\n<ul>\n<li>MacOs Sonoma 14.0(操作系统)</li>\n<li>Ros2 Humble(Robot Operating System机器人操作系统)</li>\n<li>PCL (Point Cloud Library 点云库)</li>\n<li>Anaconda或Miniconda(Python包管理工具)</li>\n</ul>\n<h2 id=\"Ros2\"><a href=\"#Ros2\" class=\"headerlink\" title=\"Ros2\"></a>Ros2</h2><p>Mac下安装Ros2过于麻烦,这里推荐使用conda方式.</p>\n<h3 id=\"1-下载anaconda或miniconda脚本并执行\"><a href=\"#1-下载anaconda或miniconda脚本并执行\" class=\"headerlink\" title=\"1. 下载anaconda或miniconda脚本并执行\"></a>1. 下载anaconda或miniconda脚本并执行</h3><p>从<a href=\"https://docs.anaconda.com/free/miniconda/miniconda-hashes/\">Anaconda官网</a>下载对应脚本</p>\n<p>这里我下载的是 <em>Miniconda3-latest-MacOSX-arm64.sh</em></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">执行后一路回车并输入<span class=\"built_in\">yes</span>完成安装</span></span><br><span class=\"line\">sh Miniconda3-latest-MacOSX-arm64.sh</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-创建新的conda环境并切换配置\"><a href=\"#2-创建新的conda环境并切换配置\" class=\"headerlink\" title=\"2. 创建新的conda环境并切换配置\"></a>2. 创建新的conda环境并切换配置</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n ros_env</span><br><span class=\"line\">conda activate ros_env</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">给conda源添加ros源</span></span><br><span class=\"line\">conda config --env --add channels conda-forge</span><br><span class=\"line\">conda config --env --add channels robostack-staging</span><br><span class=\"line\">conda config --env --remove channels defaults</span><br></pre></td></tr></table></figure>\n\n<p>conda默认环境并不是ros_env,我们可以把切换环境的命令写入配置文件中来保证生效.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#x27;conda activate ros_env&#x27; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-安装Ros2\"><a href=\"#3-安装Ros2\" class=\"headerlink\" title=\"3. 安装Ros2\"></a>3. 安装Ros2</h3><p>这里得看conda的robostack-staging中ros版本,截止到24年3月,对应版本是<em>humble</em>.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda install ros-humble-desktop</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-测试-可选\"><a href=\"#4-测试-可选\" class=\"headerlink\" title=\"4. 测试(可选)\"></a>4. 测试(可选)</h3><p>直接运行官方自带的demo即可.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ros2 run demo_nodes_cpp talker</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"PCL\"><a href=\"#PCL\" class=\"headerlink\" title=\"PCL\"></a>PCL</h2><h3 id=\"1-brew安装\"><a href=\"#1-brew安装\" class=\"headerlink\" title=\"1. brew安装\"></a>1. brew安装</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install pcl</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-源码安装\"><a href=\"#2-源码安装\" class=\"headerlink\" title=\"2. 源码安装\"></a>2. 源码安装</h3><p>从<a href=\"https://github.com/PointCloudLibrary/pcl/tags\">PCL Github</a>下载对应版本源码(这里以1.10.0为例).</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压源码</span></span><br><span class=\"line\">tar xvf pcl-pcl-1.10.0.tar.gz</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在pcl下创建build目录并进入</span></span><br><span class=\"line\">cd pcl-pcl-1.10.0 &amp;&amp; mkdir build &amp;&amp; cd build</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">设置安装目录和编译版本</span></span><br><span class=\"line\">cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/pcl-1.10 ..</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">多核编译,这里会读取服务器可用核心数.</span></span><br><span class=\"line\">make -j$(nproc)</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装到前文指定的目录下</span></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>Ros2对于Mac尤其是arm架构支持非常不友好,官方不仅不提供二进制文件,连源码安装方式基本都很难跑通,所幸还有conda方法可以成功安装.</p>\n","text":"前言这篇文章主要还是因为截止到24年3月为止,Ros2(其实Ros1也一样)在arm64架构的Macbook安装都过于麻烦复杂了. 所需软件开发所需: MacO...","permalink":"/post/Ros2点云开发(2)-环境搭建(Mac)","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"点云","slug":"点云","count":2,"path":"api/categories/点云.json"}],"tags":[{"name":"Ros2","slug":"Ros2","count":2,"path":"api/tags/Ros2.json"},{"name":"PCL","slug":"PCL","count":2,"path":"api/tags/PCL.json"},{"name":"Mac","slug":"Mac","count":1,"path":"api/tags/Mac.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%80%E9%9C%80%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">所需软件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Ros2\"><span class=\"toc-text\">Ros2</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E4%B8%8B%E8%BD%BDanaconda%E6%88%96miniconda%E8%84%9A%E6%9C%AC%E5%B9%B6%E6%89%A7%E8%A1%8C\"><span class=\"toc-text\">1. 下载anaconda或miniconda脚本并执行</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84conda%E7%8E%AF%E5%A2%83%E5%B9%B6%E5%88%87%E6%8D%A2%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">2. 创建新的conda环境并切换配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%AE%89%E8%A3%85Ros2\"><span class=\"toc-text\">3. 安装Ros2</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E6%B5%8B%E8%AF%95-%E5%8F%AF%E9%80%89\"><span class=\"toc-text\">4. 测试(可选)</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#PCL\"><span class=\"toc-text\">PCL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-brew%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">1. brew安装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">2. 源码安装</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"Ros2点云开发(1)-环境搭建(Ubuntu)","uid":"05338416b83a2fce4839c3b86a9b81c3","slug":"Ros2点云开发(1)-环境搭建(Ubuntu)","date":"2024-03-28T05:40:23.000Z","updated":"2024-03-28T09:22:32.858Z","comments":true,"path":"api/articles/Ros2点云开发(1)-环境搭建(Ubuntu).json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/ros2logo.png","text":"前言记录下开发环境的搭建过程. 所需软件开发所需: Ubuntu 20.04(操作系统) Ros2 Foxy(Robot Operating System机器人...","permalink":"/post/Ros2点云开发(1)-环境搭建(Ubuntu)","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"点云","slug":"点云","count":2,"path":"api/categories/点云.json"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","count":1,"path":"api/tags/Ubuntu.json"},{"name":"Ros2","slug":"Ros2","count":2,"path":"api/tags/Ros2.json"},{"name":"PCL","slug":"PCL","count":2,"path":"api/tags/PCL.json"}],"author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}