{"title":"从零开始撸框架(7)-与Vert.x集成 Web篇(一)","uid":"c38b17588d251cd9846139dacf4f50ed","slug":"从零开始撸框架(7)-与Vert.x集成 Web篇(一)","date":"2021-05-10T06:50:32.000Z","updated":"2021-06-09T08:46:02.182Z","comments":true,"path":"api/articles/从零开始撸框架(7)-与Vert.x集成 Web篇(一).json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/vertxlogo.png","content":"<p>上一篇讲完了与Vert.x集成的整体情况,这一篇开始与<em>vertx-web</em>集成.</p>\n<p>这些内容我们主要在<em>web</em>模块中进行开发.</p>\n<h2 id=\"Web全局集成\"><a href=\"#Web全局集成\" class=\"headerlink\" title=\"Web全局集成\"></a>Web全局集成</h2><p>web组件下的<em>build.gradle</em><br><strong>build.gradle</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #657B83\">dependencies &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  // 核心组件</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  compile project(&quot;:core&quot;)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  compile &quot;io.vertx:vertx-web:$vertxVersion&quot;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    // jsr311</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    &quot;javax.ws.rs:javax.ws.rs-api:2.1.1&quot;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h3 id=\"注解\"><a href=\"#注解\" class=\"headerlink\" title=\"注解\"></a>注解</h3><p>核心组件注解我们是基于jsr330,web组件这我们基于jsr311+自定义注解.</p>\n<h4 id=\"字段级\"><a href=\"#字段级\" class=\"headerlink\" title=\"字段级\"></a>字段级</h4><ul>\n<li>@PathParam 原生注解,获取地址栏参数.</li>\n<li>@QueryParam 原生注解,获取QuerySring.</li>\n<li>@CookieParam 原生注解,获取Cookie.</li>\n<li>@HeaderParam 原生注解,获取Header.</li>\n<li>@BodyParam 自定义注解,获取请求体,与<em>Spring</em>中的 <em>@RequestBody</em> 同含义.</li>\n<li>@SessionParam 自定义注解,获取Session.</li>\n<li>@ResponseStatus 自定义注解,设置默认响应http状态码.</li>\n</ul>\n<p>这里只放出自定义注解代码.<br><strong>BodyParam.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.annotations</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Documented</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.ElementType</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Inherited</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Retention</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.RetentionPolicy</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Target</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Inherited</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Documented</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Target</span><span style=\"color: #657B83\">(&#123;</span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">PARAMETER</span><span style=\"color: #657B83\">, </span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ANNOTATION_TYPE</span><span style=\"color: #657B83\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Retention</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">RetentionPolicy</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">RUNTIME</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> @</span><span style=\"color: #586E75; font-weight: bold\">interface</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">BodyParam</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p><strong>SessionParam.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.annotations</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Documented</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.ElementType</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Inherited</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Retention</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.RetentionPolicy</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Target</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Inherited</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Documented</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Retention</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">RetentionPolicy</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">RUNTIME</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Target</span><span style=\"color: #657B83\">(&#123;</span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">PARAMETER</span><span style=\"color: #657B83\">, </span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ANNOTATION_TYPE</span><span style=\"color: #657B83\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> @</span><span style=\"color: #586E75; font-weight: bold\">interface</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">SessionParam</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">value</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p><strong>ResponseStatus.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.annotations</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.constant.HttpStatus</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Documented</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.ElementType</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Inherited</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Retention</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.RetentionPolicy</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Target</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Inherited</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Documented</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Retention</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">RetentionPolicy</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">RUNTIME</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Target</span><span style=\"color: #657B83\">(&#123;</span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">METHOD</span><span style=\"color: #657B83\">,</span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">TYPE</span><span style=\"color: #657B83\">, </span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ANNOTATION_TYPE</span><span style=\"color: #657B83\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> @</span><span style=\"color: #586E75; font-weight: bold\">interface</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">ResponseStatus</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">HttpStatus</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">value</span><span style=\"color: #657B83\">() </span><span style=\"color: #859900\">default</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">HttpStatus</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">INTERNAL_SERVER_ERROR</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">HttpStatus</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">code</span><span style=\"color: #657B83\">() </span><span style=\"color: #859900\">default</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">HttpStatus</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">INTERNAL_SERVER_ERROR</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">msg</span><span style=\"color: #657B83\">() </span><span style=\"color: #859900\">default</span><span style=\"color: #657B83\"> </span><span style=\"color: #2AA198\">&quot;&quot;</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h4 id=\"类级\"><a href=\"#类级\" class=\"headerlink\" title=\"类级\"></a>类级</h4><ul>\n<li>@Api 自定义注解,标识当前类是一个Api,与<em>Spring</em>中的 <em>@Controller</em> 同含义.</li>\n</ul>\n<p><strong>Api.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.annotations</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Documented</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.ElementType</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Inherited</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Retention</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.RetentionPolicy</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.annotation.Target</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Inherited</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Documented</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Retention</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">RetentionPolicy</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">RUNTIME</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Target</span><span style=\"color: #657B83\">(&#123;</span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">TYPE</span><span style=\"color: #657B83\">,</span><span style=\"color: #268BD2\">ElementType</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ANNOTATION_TYPE</span><span style=\"color: #657B83\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> @</span><span style=\"color: #586E75; font-weight: bold\">interface</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Api</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h3 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h3><p>web服务配置多种多样,我们也需要定义对应的实体类.</p>\n<h4 id=\"cors\"><a href=\"#cors\" class=\"headerlink\" title=\"cors\"></a>cors</h4><h5 id=\"配置对象\"><a href=\"#配置对象\" class=\"headerlink\" title=\"配置对象\"></a>配置对象</h5><p><strong>Cors.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.http.HttpMethod</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.AccessLevel</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.Data</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.experimental.Accessors</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.experimental.FieldDefaults</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Set</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Data</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Accessors</span><span style=\"color: #657B83\">(</span><span style=\"color: #CB4B16\">chain</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #B58900\">true</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">FieldDefaults</span><span style=\"color: #657B83\">(</span><span style=\"color: #CB4B16\">level</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">AccessLevel</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">PRIVATE</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">Cors</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">origin</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Boolean</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">allowCredentials</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Set</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">HttpMethod</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">allowedMethods</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Set</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">allowedHeaders</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h5 id=\"配置读取\"><a href=\"#配置读取\" class=\"headerlink\" title=\"配置读取\"></a>配置读取</h5><p><strong>CorsConfig.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.http.HttpMethod</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.json.JsonArray</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.json.JsonObject</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.extern.log4j.Log4j2</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.val</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config.IConfig</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config.YgoConfig</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.constant.Const</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.Trunk</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Set</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.function.Function</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.stream.Collectors</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Log4j2</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">CorsConfig</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">implements</span><span style=\"color: #657B83\"> </span><span style=\"color: #6C71C4\">IConfig</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">Cors</span><span style=\"color: #657B83\">&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Override</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Cors</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val config </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> Trunk.</span><span style=\"color: #859900\">&lt;</span><span style=\"color: #657B83\">YgoConfig</span><span style=\"color: #859900\">&gt;</span><span style=\"color: #268BD2\">singleton</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">YgoConfig</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">).</span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">config</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getJsonObject</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Const</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">VERTX</span><span style=\"color: #657B83\">).</span><span style=\"color: #268BD2\">getJsonObject</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;cors&quot;</span><span style=\"color: #657B83\">));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Cors</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">JsonObject</span><span style=\"color: #657B83\"> json) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Cors</span><span style=\"color: #657B83\">().</span><span style=\"color: #268BD2\">setOrigin</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">json</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getString</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;origin&quot;</span><span style=\"color: #657B83\">))</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">setAllowCredentials</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">json</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getBoolean</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;allow-credentials&quot;</span><span style=\"color: #657B83\">))</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">setAllowedHeaders</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">toSet</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">json</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getJsonArray</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;allowed-headers&quot;</span><span style=\"color: #657B83\">), Object</span><span style=\"color: #859900\">::</span><span style=\"color: #657B83\">toString))</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">setAllowedMethods</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">toSet</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">json</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getJsonArray</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;allowed-methods&quot;</span><span style=\"color: #657B83\">),</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">          d </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">HttpMethod</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">d</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">toString</span><span style=\"color: #657B83\">().</span><span style=\"color: #268BD2\">toUpperCase</span><span style=\"color: #657B83\">())));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> &lt;</span><span style=\"color: #586E75; font-weight: bold\">T</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #586E75; font-weight: bold\">Set</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">T</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">toSet</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">JsonArray</span><span style=\"color: #657B83\"> xs, </span><span style=\"color: #586E75; font-weight: bold\">Function</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">Object</span><span style=\"color: #657B83\">, </span><span style=\"color: #586E75; font-weight: bold\">T</span><span style=\"color: #657B83\">&gt; fn) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">xs</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">stream</span><span style=\"color: #657B83\">().</span><span style=\"color: #268BD2\">map</span><span style=\"color: #657B83\">(fn).</span><span style=\"color: #268BD2\">collect</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Collectors</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">toSet</span><span style=\"color: #657B83\">());</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h5 id=\"配置示例\"><a href=\"#配置示例\" class=\"headerlink\" title=\"配置示例\"></a>配置示例</h5><p><strong>application.yaml</strong></p>\n<div class=\"language-yaml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yaml</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #268BD2\">ygo</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">profile</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">default</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">vertx</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">name</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">vertx-ygo</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">options</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">haEnabled</span><span style=\"color: #657B83\">: </span><span style=\"color: #B58900\">false</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">preferNativeTransport</span><span style=\"color: #657B83\">: </span><span style=\"color: #B58900\">true</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">cors</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">origin</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">&quot;*&quot;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">allow-credentials</span><span style=\"color: #657B83\">: </span><span style=\"color: #B58900\">true</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">allowed-methods</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">GET</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">POST</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">PUT</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">DELETE</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">PATCH</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">OPTIONS</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">HEAD</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">allowed-headers</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        - </span><span style=\"color: #2AA198\">Content-Type</span></span></code></pre></div><h3 id=\"类、配置\"><a href=\"#类、配置\" class=\"headerlink\" title=\"类、配置\"></a>类、配置</h3><p>定义一个对象,用来装请求的各种参数.</p>\n<p><strong>Request.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.scan</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.http.HttpMethod</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.AccessLevel</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.Data</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.experimental.Accessors</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.experimental.FieldDefaults</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.web.constant.HttpStatus</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.lang.reflect.Method</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Set</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Data</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Accessors</span><span style=\"color: #657B83\">(</span><span style=\"color: #CB4B16\">chain</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #B58900\">true</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">FieldDefaults</span><span style=\"color: #657B83\">(</span><span style=\"color: #CB4B16\">level</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">AccessLevel</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">PRIVATE</span><span style=\"color: #657B83\">)</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">Request</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 请求uri路径.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">path</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">HttpMethod</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">httpMethod</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">HttpStatus</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">httpStatus</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Long</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">timeout</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 对应类中所需要执行的函数</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Method</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">method</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Set</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">consumes</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Set</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">produces</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 代理类,一般是XxxApi,XxxController,XxxAgent.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Object</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">proxy</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 对应EventBus中的地址.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">addr</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p><em>Deck.java</em>追加</p>\n<p><strong>Deck.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">Deck</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 所有包含@Api注解类</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Set</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">Class</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">?</span><span style=\"color: #657B83\">&gt;&gt; </span><span style=\"color: #268BD2\">APIS</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">HashSet</span><span style=\"color: #657B83\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 所有的</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">List</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">Request</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">REQUESTS</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">ArrayList</span><span style=\"color: #657B83\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p>把<a href=\"https://www.borntorain.com/post/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%92%B8%E6%A1%86%E6%9E%B6(5)-%E4%B8%8EVert.x%E9%9B%86%E6%88%90(%E4%B8%80)\">上一篇</a>中的<em>EventloopHttpActor.java</em>重构一下. 在里面把Router全局配置加上.<br><strong>EventloopHttpActor.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">EventloopHttpActor</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">extends</span><span style=\"color: #657B83\"> </span><span style=\"color: #6C71C4\">AbstractVerticle</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Override</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">void</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">start</span><span style=\"color: #657B83\">() </span><span style=\"color: #586E75; font-weight: bold\">throws</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Exception</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">Deck</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">HTTP_SERVERS</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">forEach</span><span style=\"color: #657B83\">((port, config) </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      val router </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Router</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">router</span><span style=\"color: #657B83\">(vertx);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">configRouter</span><span style=\"color: #657B83\">(router);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">server</span><span style=\"color: #657B83\">(router, port, config);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    &#125;);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// router的整体参数配置</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">void</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">configRouter</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">Router</span><span style=\"color: #657B83\"> router) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 集群还是本地存储</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val store </span><span style=\"color: #859900\">=</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">vertx</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isClustered</span><span style=\"color: #657B83\">() </span><span style=\"color: #859900\">?</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">ClusteredSessionStore</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">(vertx) </span><span style=\"color: #859900\">:</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">LocalSessionStore</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">(vertx);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val cors </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> Trunk.</span><span style=\"color: #859900\">&lt;</span><span style=\"color: #657B83\">CorsConfig</span><span style=\"color: #859900\">&gt;</span><span style=\"color: #268BD2\">singleton</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">CorsConfig</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">).</span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// POST|PUT请求才接收body,其他不接收解析更快.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">router</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">route</span><span style=\"color: #657B83\">().</span><span style=\"color: #268BD2\">method</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">HttpMethod</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">POST</span><span style=\"color: #657B83\">).</span><span style=\"color: #268BD2\">method</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">HttpMethod</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">PUT</span><span style=\"color: #657B83\">).</span><span style=\"color: #268BD2\">handler</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">BodyHandler</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">())</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #93A1A1; font-style: italic\">// 全局默认超时: 5s</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">handler</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">TimeoutHandler</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">())</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">handler</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">ResponseContentTypeHandler</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">())</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">handler</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">SessionHandler</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">(store))</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #93A1A1; font-style: italic\">// 跨域</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">handler</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">CorsHandler</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">create</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">cors</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getOrigin</span><span style=\"color: #657B83\">()).</span><span style=\"color: #268BD2\">allowCredentials</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">cors</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getAllowCredentials</span><span style=\"color: #657B83\">())</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        .</span><span style=\"color: #268BD2\">allowedHeaders</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">cors</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getAllowedHeaders</span><span style=\"color: #657B83\">()).</span><span style=\"color: #268BD2\">allowedMethods</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">cors</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getAllowedMethods</span><span style=\"color: #657B83\">()));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125; </span></span></code></pre></div><hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>这一篇完成了<em>vertx-web</em>的全局配置,使用时会应用到<em>vertx-web</em>下的所有请求.</p>\n","text":"上一篇讲完了与Vert.x集成的整体情况,这一篇开始与vertx-web集成. 这些内容我们主要在web模块中进行开发. Web全局集成web组件下的build...","permalink":"/post/从零开始撸框架(7)-与Vert.x集成 Web篇(一)","photos":[],"count_time":{"symbolsCount":"7.9k","symbolsTime":"7 mins."},"categories":[{"name":"从零开始","slug":"从零开始","count":8,"path":"api/categories/从零开始.json"}],"tags":[{"name":"Vert.x","slug":"Vert-x","count":8,"path":"api/tags/Vert-x.json"},{"name":"Actor","slug":"Actor","count":8,"path":"api/tags/Actor.json"},{"name":"设计模式","slug":"设计模式","count":8,"path":"api/tags/设计模式.json"},{"name":"Java","slug":"Java","count":9,"path":"api/tags/Java.json"},{"name":"代理模式","slug":"代理模式","count":4,"path":"api/tags/代理模式.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Web%E5%85%A8%E5%B1%80%E9%9B%86%E6%88%90\"><span class=\"toc-text\">Web全局集成</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E8%A7%A3\"><span class=\"toc-text\">注解</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AD%97%E6%AE%B5%E7%BA%A7\"><span class=\"toc-text\">字段级</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%B1%BB%E7%BA%A7\"><span class=\"toc-text\">类级</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#cors\"><span class=\"toc-text\">cors</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">配置对象</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96\"><span class=\"toc-text\">配置读取</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">配置示例</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%B1%BB%E3%80%81%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">类、配置</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"从零开始撸框架(8)-与Vert.x集成 Web篇(二)","uid":"31ebad76ece9cbfbb4b4be8543fa818d","slug":"从零开始撸框架(8)-与Vert.x集成 Web篇(二)","date":"2021-05-12T06:33:24.000Z","updated":"2021-06-28T09:51:53.342Z","comments":true,"path":"api/articles/从零开始撸框架(8)-与Vert.x集成 Web篇(二).json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/vertxlogo.png","text":"上一篇讲完了全局配置,这一篇我们来讲每个路由的集成. Vert.x原始使用方式样例来自于Vert.x官网 Vert.x配置api接口javapublic cla...","permalink":"/post/从零开始撸框架(8)-与Vert.x集成 Web篇(二)","photos":[],"count_time":{"symbolsCount":"24k","symbolsTime":"22 mins."},"categories":[{"name":"从零开始","slug":"从零开始","count":8,"path":"api/categories/从零开始.json"}],"tags":[{"name":"Vert.x","slug":"Vert-x","count":8,"path":"api/tags/Vert-x.json"},{"name":"Actor","slug":"Actor","count":8,"path":"api/tags/Actor.json"},{"name":"设计模式","slug":"设计模式","count":8,"path":"api/tags/设计模式.json"},{"name":"Java","slug":"Java","count":9,"path":"api/tags/Java.json"},{"name":"代理模式","slug":"代理模式","count":4,"path":"api/tags/代理模式.json"}],"author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"从零开始撸框架(6)-与Vert.x集成 基础篇(二)","uid":"a0a429763c9944ec54d86de5e0e4f445","slug":"从零开始撸框架(6)-与Vert.x集成 基础篇(二)","date":"2021-05-07T03:54:00.000Z","updated":"2021-05-10T10:02:35.468Z","comments":true,"path":"api/articles/从零开始撸框架(6)-与Vert.x集成 基础篇(二).json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/vertxlogo.png","text":"这一章我们来将上一章中的 Verticle 在Vert.x中运行起来. Vert.x原始使用方式样例来自于Vert.x官网 部署Verticle并运行Vert....","permalink":"/post/从零开始撸框架(6)-与Vert.x集成 基础篇(二)","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[{"name":"从零开始","slug":"从零开始","count":8,"path":"api/categories/从零开始.json"}],"tags":[{"name":"Vert.x","slug":"Vert-x","count":8,"path":"api/tags/Vert-x.json"},{"name":"Actor","slug":"Actor","count":8,"path":"api/tags/Actor.json"},{"name":"设计模式","slug":"设计模式","count":8,"path":"api/tags/设计模式.json"},{"name":"Java","slug":"Java","count":9,"path":"api/tags/Java.json"},{"name":"代理模式","slug":"代理模式","count":4,"path":"api/tags/代理模式.json"}],"author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}