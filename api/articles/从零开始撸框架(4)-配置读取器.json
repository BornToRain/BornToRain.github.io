{"title":"从零开始撸框架(4)-配置读取器","uid":"45dcae5ccfe9e8f63cc7cbe584bb9d7a","slug":"从零开始撸框架(4)-配置读取器","date":"2021-05-01T22:43:37.000Z","updated":"2021-05-07T01:21:36.962Z","comments":true,"path":"api/articles/从零开始撸框架(4)-配置读取器.json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/vertxlogo.png","content":"<p>到目前为止,框架已经支持了 <em>工厂</em> 、 <em>Bean分组</em> 、 <em>依赖注入</em> ,这一章我们来实现框架配置的读取.</p>\n<h2 id=\"配置读取基类\"><a href=\"#配置读取基类\" class=\"headerlink\" title=\"配置读取基类\"></a>配置读取基类</h2><p>老样子,我们还是先定义一个读取基类,方便后续子类扩展.</p>\n<p><strong>IConfig.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * 读取配置文件</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">interface</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">IConfig</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">T</span><span style=\"color: #657B83\">&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">T</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h3 id=\"辅助类\"><a href=\"#辅助类\" class=\"headerlink\" title=\"辅助类\"></a>辅助类</h3><p>配置加载肯定会涉及到IO流<br><strong>IO.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.extern.log4j.Log4j2</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.val</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.io.File</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.io.FileInputStream</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.io.InputStream</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.net.JarURLConnection</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.net.URL</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Objects</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Log4j2</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">IO</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 确保能获取输入流</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">InputStream</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">ensureRead</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> filename) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Fn</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ensureRun</span><span style=\"color: #657B83\">(() </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      val file </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">File</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #586E75; font-weight: bold\">var</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">in</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Fn</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ensureRun</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">file</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">exists</span><span style=\"color: #657B83\">() </span><span style=\"color: #859900\">&amp;&amp;</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">file</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isFile</span><span style=\"color: #657B83\">(),</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        </span><span style=\"color: #93A1A1; font-style: italic\">// 1. 直接读文件</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        () </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">FileInputStream</span><span style=\"color: #657B83\">(file),</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        </span><span style=\"color: #93A1A1; font-style: italic\">// 2. 环境上下文</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        () </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Thread</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">currentThread</span><span style=\"color: #657B83\">().</span><span style=\"color: #268BD2\">getContextClassLoader</span><span style=\"color: #657B83\">().</span><span style=\"color: #268BD2\">getResourceAsStream</span><span style=\"color: #657B83\">(filename));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #93A1A1; font-style: italic\">// 3. 当前类加载器</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #268BD2\">Objects</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isNull</span><span style=\"color: #657B83\">(in)) in </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">IO</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getResourceAsStream</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #93A1A1; font-style: italic\">// 4. 类加载器</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #268BD2\">Objects</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isNull</span><span style=\"color: #657B83\">(in)) in </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">ClassLoader</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getSystemResourceAsStream</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #93A1A1; font-style: italic\">// 5. jar加载</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #268BD2\">Objects</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isNull</span><span style=\"color: #657B83\">(in) </span><span style=\"color: #859900\">&amp;&amp;</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">filename</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">contains</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;jar!/&quot;</span><span style=\"color: #657B83\">)) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        val url </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">URL</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        val protocol </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">url</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getProtocol</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #2AA198\">&quot;jar&quot;</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">equals</span><span style=\"color: #657B83\">(protocol)) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">          val jar </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> (JarURLConnection) </span><span style=\"color: #268BD2\">url</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">openConnection</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">          in </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">jar</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getInputStream</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #268BD2\">Objects</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isNull</span><span style=\"color: #657B83\">(in)) </span><span style=\"color: #859900\">throw</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">IllegalStateException</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> in;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    &#125;, filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p>加载基类,子类继承后实现多种不同的加载方式,比如: <em>yaml</em> 、 <em>xml</em> 、<em>properties</em> 、 <em>json</em> .<br><strong>ILoader.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.Trunk</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Map</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">interface</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">ILoader</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 这里根据后缀名调用对应的loader.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">Map</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\">, </span><span style=\"color: #586E75; font-weight: bold\">ILoader</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">MAP</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Map</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">of</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;.yaml&quot;</span><span style=\"color: #657B83\">, </span><span style=\"color: #268BD2\">Trunk</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">singleton</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">YamlLoader</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">load</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p>这里我只实现yaml读取,其他省略.</p>\n<p>core模块<strong>build.gradle</strong>追加</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #657B83\">dependencies &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  // 读yaml</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  compile &quot;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:$jacksonVersion&quot;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p><strong>YamlLoader.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">com.fasterxml.jackson.databind.ObjectMapper</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">com.fasterxml.jackson.dataformat.yaml.YAMLMapper</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.Fn</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.IO</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">YamlLoader</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">implements</span><span style=\"color: #657B83\"> </span><span style=\"color: #6C71C4\">ILoader</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">ObjectMapper</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">YAML</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">YAMLMapper</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Override</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">load</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> filename) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Fn</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ensureRun</span><span style=\"color: #657B83\">(() </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">YAML</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">readTree</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">IO</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ensureRead</span><span style=\"color: #657B83\">(filename)).</span><span style=\"color: #268BD2\">toString</span><span style=\"color: #657B83\">(), filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p><strong>Configs.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.netty.util.internal.StringUtil</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.json.JsonObject</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.extern.log4j.Log4j2</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.val</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config.ILoader</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.constant.Console</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.HashMap</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Map</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">java.util.Objects</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">@</span><span style=\"color: #586E75; font-weight: bold\">Log4j2</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">Configs</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Map</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\">, </span><span style=\"color: #586E75; font-weight: bold\">JsonObject</span><span style=\"color: #657B83\">&gt; </span><span style=\"color: #268BD2\">CONFIG</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">HashMap</span><span style=\"color: #657B83\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 框架配置文件名,我这里写死了yaml</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">CONFIG_FILE</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #2AA198\">&quot;application.yaml&quot;</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 框架默认配置</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">DEFAULT</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #2AA198\">&quot;ygo/&quot;</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 默认采用的loader,这里我写死了yaml,可自行扩展成动态.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">ILoader</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">LOADER</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">ILoader</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">MAP</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">get</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;.yaml&quot;</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 生成读取文件名</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 1. application.yaml</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 2. application-key.yaml</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">generateFilename</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> key) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Fn</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">ensureRun</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Objects</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isNull</span><span style=\"color: #657B83\">(key),</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      () </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> CONFIG_FILE,</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      () </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> </span><span style=\"color: #2AA198\">&quot;application-&quot;</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">+</span><span style=\"color: #657B83\"> key </span><span style=\"color: #859900\">+</span><span style=\"color: #657B83\"> </span><span style=\"color: #2AA198\">&quot;.yaml&quot;</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">JsonObject</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> filename) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val name </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">generateFilename</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val value </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">CONFIG</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">get</span><span style=\"color: #657B83\">(name);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 缓存有则不再走io流读取</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #268BD2\">Objects</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">nonNull</span><span style=\"color: #657B83\">(value)) </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> value;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val merged </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">JsonObject</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 1.默认配置</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val defaultPath </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> DEFAULT </span><span style=\"color: #859900\">+</span><span style=\"color: #657B83\"> name;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val silent </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">loader</span><span style=\"color: #657B83\">(defaultPath);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">log</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">info</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Console</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">CONFIG_READ</span><span style=\"color: #657B83\">, </span><span style=\"color: #2AA198\">&quot;Default&quot;</span><span style=\"color: #657B83\">, defaultPath);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">merged</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">mergeIn</span><span style=\"color: #657B83\">(silent, </span><span style=\"color: #B58900\">true</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 2.用户自定义配置</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">log</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">info</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Console</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">CONFIG_READ</span><span style=\"color: #657B83\">, </span><span style=\"color: #2AA198\">&quot;User&quot;</span><span style=\"color: #657B83\">, name);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val custom </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">loader</span><span style=\"color: #657B83\">(name);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 两者配置都存在的场合需要合并</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #859900\">!</span><span style=\"color: #268BD2\">custom</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isEmpty</span><span style=\"color: #657B83\">()) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">log</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">info</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Console</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">MERGE</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">merged</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">mergeIn</span><span style=\"color: #657B83\">(custom, </span><span style=\"color: #B58900\">true</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">CONFIG</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">put</span><span style=\"color: #657B83\">(name, merged);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> merged;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #93A1A1; font-style: italic\">// 所有loader加载完后统一转换成Vert.x的JsonObject格式数据.</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">private</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">static</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">JsonObject</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">loader</span><span style=\"color: #657B83\">(</span><span style=\"color: #586E75; font-weight: bold\">String</span><span style=\"color: #657B83\"> filename) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val text </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">LOADER</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">load</span><span style=\"color: #657B83\">(filename);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">Fn</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      .</span><span style=\"color: #268BD2\">ensureRun</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">StringUtil</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">isNullOrEmpty</span><span style=\"color: #657B83\">(text), JsonObject</span><span style=\"color: #859900\">::new</span><span style=\"color: #657B83\">, () </span><span style=\"color: #586E75; font-weight: bold\">-&gt;</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">JsonObject</span><span style=\"color: #657B83\">(text));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><hr>\n<h2 id=\"框架配置读取器\"><a href=\"#框架配置读取器\" class=\"headerlink\" title=\"框架配置读取器\"></a>框架配置读取器</h2><h3 id=\"本体\"><a href=\"#本体\" class=\"headerlink\" title=\"本体\"></a>本体</h3><p>整个框架的配置<br><strong>YgoConfig.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.json.JsonObject</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.val</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.constant.Const</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.Configs</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * 框架整体配置</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">final</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">YgoConfig</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">implements</span><span style=\"color: #657B83\"> </span><span style=\"color: #6C71C4\">IConfig</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">JsonObject</span><span style=\"color: #657B83\">&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Override</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">JsonObject</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 读取application.yaml</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val json </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">Configs</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">(</span><span style=\"color: #B58900\">null</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">json</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getJsonObject</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Const</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">YGO</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><p>在 <em>&#x2F;test&#x2F;main&#x2F;resources</em> 、 <em>&#x2F;test&#x2F;main&#x2F;resources&#x2F;ygo&#x2F;</em> 目录下分别添加 <em>application.yaml</em> 文件.<br><strong>application.yaml</strong></p>\n<div class=\"language-yaml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yaml</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #268BD2\">ygo</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">name</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">test</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">profile</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">default</span></span></code></pre></div><p>配置读取测试类<br><strong>IConfigTest.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.val</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.Trunk</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.junit.Assert</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.junit.Test</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">IConfigTest</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Test</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">void</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">testYgo</span><span style=\"color: #657B83\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val config </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> Trunk.</span><span style=\"color: #859900\">&lt;</span><span style=\"color: #657B83\">YgoConfig</span><span style=\"color: #859900\">&gt;</span><span style=\"color: #268BD2\">singleton</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">YgoConfig</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val json </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">config</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val data </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">json</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getString</span><span style=\"color: #657B83\">(</span><span style=\"color: #2AA198\">&quot;name&quot;</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">Assert</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">assertEquals</span><span style=\"color: #657B83\">(data, </span><span style=\"color: #2AA198\">&quot;test&quot;</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h2 id=\"测试结果\"><a href=\"#测试结果\" class=\"headerlink\" title=\"测试结果\"></a>测试结果<br><img src=\"/images/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%92%B8%E6%A1%86%E6%9E%B6/4/testret1.png\" alt=\"运行结果\"></h2><h2 id=\"Vert-x配置读取器\"><a href=\"#Vert-x配置读取器\" class=\"headerlink\" title=\"Vert.x配置读取器\"></a>Vert.x配置读取器</h2><h3 id=\"本体-1\"><a href=\"#本体-1\" class=\"headerlink\" title=\"本体\"></a>本体</h3><p><strong>VertxConfig.java</strong></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #859900\">package</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.config</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">io.vertx.core.VertxOptions</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">lombok.val</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.constant.Const</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"><span style=\"color: #859900\">import</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">org.btr.ygo.core.kit.Trunk</span><span style=\"color: #657B83\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> * </span><span style=\"color: #859900; font-style: italic\">@author</span><span style=\"color: #93A1A1; font-style: italic\"> &lt;a href=&quot;mailto:1159930219@qq.com&quot;&gt;BornToRain&lt;/a&gt;</span></span>\n<span class=\"line\"><span style=\"color: #93A1A1; font-style: italic\"> */</span></span>\n<span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">VertxConfig</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">implements</span><span style=\"color: #657B83\"> </span><span style=\"color: #6C71C4\">IConfig</span><span style=\"color: #657B83\">&lt;</span><span style=\"color: #586E75; font-weight: bold\">VertxOptions</span><span style=\"color: #657B83\">&gt; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Override</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">VertxOptions</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 先读取框架配置</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val ygo </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> Trunk.</span><span style=\"color: #859900\">&lt;</span><span style=\"color: #657B83\">YgoConfig</span><span style=\"color: #859900\">&gt;</span><span style=\"color: #268BD2\">singleton</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">YgoConfig</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val config </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">ygo</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 从框架配置中读取Vertx部分</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val options </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\">  </span><span style=\"color: #859900\">new</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">VertxOptions</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">config</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getJsonObject</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Const</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">VERTX</span><span style=\"color: #657B83\">).</span><span style=\"color: #268BD2\">getJsonObject</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">Const</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">OPTIONS</span><span style=\"color: #657B83\">));</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 这里是我个人习惯,将线程数设置为CPU核心*2</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 可以参考这个 https://www.cnblogs.com/dennyzhangdd/p/6909771.html</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #93A1A1; font-style: italic\">// 工作线程默认为20,如果没变动则将其改为CPU核数*2;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">if</span><span style=\"color: #657B83\"> (</span><span style=\"color: #D33682\">20</span><span style=\"color: #657B83\"> </span><span style=\"color: #859900\">==</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">options</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getWorkerPoolSize</span><span style=\"color: #657B83\">()) </span><span style=\"color: #268BD2\">options</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">setWorkerPoolSize</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">VertxOptions</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">DEFAULT_EVENT_LOOP_POOL_SIZE</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #859900\">return</span><span style=\"color: #657B83\"> options;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><h3 id=\"测试-1\"><a href=\"#测试-1\" class=\"headerlink\" title=\"测试\"></a>测试</h3><p><em>test</em> 文件夹下的 <em>application.yaml</em> 追加内容</p>\n<div class=\"language-yaml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yaml</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #268BD2\">ygo</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">name</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">test</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">profile</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">default</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #268BD2\">vertx</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">name</span><span style=\"color: #657B83\">: </span><span style=\"color: #2AA198\">vertx-ygo</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">options</span><span style=\"color: #657B83\">:</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">haEnabled</span><span style=\"color: #657B83\">: </span><span style=\"color: #B58900\">false</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">      </span><span style=\"color: #268BD2\">preferNativeTransport</span><span style=\"color: #657B83\">: </span><span style=\"color: #B58900\">true</span></span></code></pre></div><p><strong>IConfigTest.java</strong>追加测试</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki solarized-light\" style=\"background-color: #FDF6E3\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">class</span><span style=\"color: #657B83\"> </span><span style=\"color: #CB4B16\">IConfigTest</span><span style=\"color: #657B83\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  ...</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  @</span><span style=\"color: #586E75; font-weight: bold\">Test</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  </span><span style=\"color: #586E75; font-weight: bold\">public</span><span style=\"color: #657B83\"> </span><span style=\"color: #586E75; font-weight: bold\">void</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">testVertx</span><span style=\"color: #657B83\">() &#123;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val config </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> Trunk.</span><span style=\"color: #859900\">&lt;</span><span style=\"color: #657B83\">VertxConfig</span><span style=\"color: #859900\">&gt;</span><span style=\"color: #268BD2\">singleton</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">VertxConfig</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">class</span><span style=\"color: #657B83\">);</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    val options </span><span style=\"color: #859900\">=</span><span style=\"color: #657B83\"> </span><span style=\"color: #268BD2\">config</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">read</span><span style=\"color: #657B83\">();</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">    </span><span style=\"color: #268BD2\">Assert</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">assertTrue</span><span style=\"color: #657B83\">(</span><span style=\"color: #268BD2\">options</span><span style=\"color: #657B83\">.</span><span style=\"color: #268BD2\">getPreferNativeTransport</span><span style=\"color: #657B83\">());</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #657B83\">&#125;</span></span></code></pre></div><p>测试结果<br><img src=\"/images/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%92%B8%E6%A1%86%E6%9E%B6/4/testret2.png\" alt=\"运行结果\"></p>\n<hr>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>这一章我们实现了框架配置的yaml读取,并且也留下了修改的入口,日后扩展其他方式也无须修改源代码,子类自行实现 <em>ILoader.java</em> 即可.</p>\n<p>框架的其他参数读取同理,扩展 <em>IConfig.java</em> 即可.</p>\n","text":"到目前为止,框架已经支持了 工厂 、 Bean分组 、 依赖注入 ,这一章我们来实现框架配置的读取. 配置读取基类老样子,我们还是先定义一个读取基类,方便后续子...","permalink":"/post/从零开始撸框架(4)-配置读取器","photos":[],"count_time":{"symbolsCount":"7.9k","symbolsTime":"7 mins."},"categories":[{"name":"从零开始","slug":"从零开始","count":8,"path":"api/categories/从零开始.json"}],"tags":[{"name":"Vert.x","slug":"Vert-x","count":8,"path":"api/tags/Vert-x.json"},{"name":"Actor","slug":"Actor","count":8,"path":"api/tags/Actor.json"},{"name":"设计模式","slug":"设计模式","count":8,"path":"api/tags/设计模式.json"},{"name":"Java","slug":"Java","count":9,"path":"api/tags/Java.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96%E5%9F%BA%E7%B1%BB\"><span class=\"toc-text\">配置读取基类</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BE%85%E5%8A%A9%E7%B1%BB\"><span class=\"toc-text\">辅助类</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96%E5%99%A8\"><span class=\"toc-text\">框架配置读取器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%AC%E4%BD%93\"><span class=\"toc-text\">本体</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">测试</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C\"><span class=\"toc-text\">测试结果</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Vert-x%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96%E5%99%A8\"><span class=\"toc-text\">Vert.x配置读取器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%AC%E4%BD%93-1\"><span class=\"toc-text\">本体</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95-1\"><span class=\"toc-text\">测试</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"从零开始撸框架(5)-与Vert.x集成 基础篇(一)","uid":"6b0291adc1983f086f545c1304c40edc","slug":"从零开始撸框架(5)-与Vert.x集成 基础篇(一)","date":"2021-05-07T00:27:12.000Z","updated":"2021-06-08T08:04:54.998Z","comments":true,"path":"api/articles/从零开始撸框架(5)-与Vert.x集成 基础篇(一).json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/vertxlogo.png","text":"前两章我们分别讲完了类、配置,让框架有了骨架.接下来几章我们要实现类、配置与Vert.x集成,让框架跑在Vert.x中. 由于接下来会设计到对外提供web服务了...","permalink":"/post/从零开始撸框架(5)-与Vert.x集成 基础篇(一)","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"15 mins."},"categories":[{"name":"从零开始","slug":"从零开始","count":8,"path":"api/categories/从零开始.json"}],"tags":[{"name":"Vert.x","slug":"Vert-x","count":8,"path":"api/tags/Vert-x.json"},{"name":"Actor","slug":"Actor","count":8,"path":"api/tags/Actor.json"},{"name":"设计模式","slug":"设计模式","count":8,"path":"api/tags/设计模式.json"},{"name":"Java","slug":"Java","count":9,"path":"api/tags/Java.json"},{"name":"代理模式","slug":"代理模式","count":4,"path":"api/tags/代理模式.json"}],"author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"从零开始撸框架(3)-类扫描器","uid":"bf9123d57d7a0fda9f11ed154298fba1","slug":"从零开始撸框架(3)-类扫描器","date":"2021-05-01T16:01:49.000Z","updated":"2021-05-02T00:03:01.318Z","comments":true,"path":"api/articles/从零开始撸框架(3)-类扫描器.json","keywords":["Coder","Scalaer","Javaer"],"cover":"/images/vertxlogo.png","text":"上一章我们已经把每个包中的类都统一加载到一个Set中了,以后凡是需要用到类的场景我们都可以从Set集合中取出,但是光这样还不够好.往后所有操作都依赖于这一个集合...","permalink":"/post/从零开始撸框架(3)-类扫描器","photos":[],"count_time":{"symbolsCount":"17k","symbolsTime":"15 mins."},"categories":[{"name":"从零开始","slug":"从零开始","count":8,"path":"api/categories/从零开始.json"}],"tags":[{"name":"Vert.x","slug":"Vert-x","count":8,"path":"api/tags/Vert-x.json"},{"name":"Actor","slug":"Actor","count":8,"path":"api/tags/Actor.json"},{"name":"设计模式","slug":"设计模式","count":8,"path":"api/tags/设计模式.json"},{"name":"Java","slug":"Java","count":9,"path":"api/tags/Java.json"}],"author":{"name":"因雨而生","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"一直没脱离低级趣味的Coder","socials":{"github":"https://github.com/BornToRain","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}